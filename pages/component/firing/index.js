(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/component/firing/index"],{"0184":function(e,t,o){o.r(t);var n=o("9c10"),a=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t.default=a.a},"0b76":function(e,t,o){(function(e,t){var n=o("4ea4");o("1ae4"),n(o("66fd"));var a=n(o("63c4"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(a.default)}).call(this,o("bc2e").default,o("543d").createPage)},"63c4":function(e,t,o){o.r(t);var n=o("cf00"),a=o("0184");for(var s in a)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(s);o("87cc");var i=o("f0c5"),r=Object(i.a)(a.default,n.b,n.c,!1,null,null,null,!1,n.a,void 0);t.default=r.exports},"87cc":function(e,t,o){var n=o("bb70");o.n(n).a},"9c10":function(e,t,o){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("9323");t.default={data:function(){return{weChatMiniProgram:0,result:"",txt:"",img:"",num:5,timer:null,mag:{},animationData:{},reportType:"",version:1,analyzeStatus:null,text:"",numps:100,timerps:null,resultps:"",reportId:""}},onLoad:function(t){var o=this;o.taotuo(),e.getStorage({key:"reportId",success:function(e){o.reportId=e.data}})},onShow:function(){},onHide:function(){clearInterval(this.timer),this.timer=null,this.num=5},methods:{taotuo:function(){var t=this;e.request({url:t.$store.state.requestUrl+"/open/getRppgApproveStatus",method:"get",data:{},success:function(e){t.weChatMiniProgram=e.data.data.weChatMiniProgram},fail:function(e){console.log("失败：",e)}})},submit:function(){var t=this;e.showLoading({title:"加载中"}),e.getStorage({key:"wxId",success:function(o){console.log(o.data,"wxId信息"),console.log({code:t.result,userId:t.$store.state.userId,wxId:o.data,filePath:t.img,reportId:t.reportId},"formData"),e.uploadFile({url:t.$store.state.requestUrl+"/open/verifyRppgReportUserFace",filePath:t.img,name:"file",formData:{code:t.result,userId:t.$store.state.userId,wxId:o.data},success:function(o){console.log(o,"uploadFileRes");var n=JSON.parse(o.data);console.log(n,"data-shouquan--parse"),200==n.code?(""!=n.data.status?(e.showLoading({title:n.data.status,icon:"none"}),setTimeout((function(){t.reportId?(e.hideLoading(),t.getReportIdmsg(t.reportId)):(e.hideLoading(),e.reLaunch({url:"/pages/component/my/index"}))}),2e3)):t.reportId?(e.hideLoading(),t.getReportIdmsg(t.reportId)):(e.hideLoading(),e.reLaunch({url:"/pages/component/my/index"})),console.log(t.reportId,"_this.reportId")):(e.showToast({title:n.msg?n.msg:"",icon:"none"}),e.hideLoading())},fail:function(e){t.$refs.popup.close(),console.log("失败：",e)}})},fail:function(e){console.log(e,"wxId信息fail")}})},getReportIdmsg:function(t){var o=this;e.request({url:o.$store.state.requestUrl+"/open/manage/getReportAnalyzeStatus",method:"get",data:{reportId:t},success:function(a){if(200==a.data.code){var s=a.data.data.reportType;e.setStorage({key:"reportId",data:t,success:function(){e.setStorage({key:"version",data:s,success:function(){(0,n.tiaobaogaops)(t,s)}})}})}else e.showToast({title:a.data.msg?a.data.msg:"",icon:"none"}),o.$refs.popup.close();e.hideLoading()},fail:function(t){e.hideLoading(),console.log("失败：",t)}})},tiaobaogao:function(t,o){6==o?e.redirectTo({url:"/pages/component/report/indexemotion?reportId="+t+"&reportType="+o}):7==o?e.redirectTo({url:"/pages/component/report/rppgreportmdd?reportId="+t+"&reportType="+o}):e.redirectTo({url:"/pages/component/report/index?reportId="+t+"&reportType="+o})},newbaogao:function(t){var o=this;e.showLoading({title:"加载中"}),e.request({url:o.$store.state.requestUrl+"/open/manage/getReportAnalyzeStatus",method:"get",data:{reportId:t},success:function(t){200==t.data.code&&(o.reportType=t.data.data.reportType,o.text=t.data.data.info,o.analyzeStatus=t.data.data.analyzeStatus,-1==o.analyzeStatus&&o.paoshu()),e.hideLoading()},fail:function(t){e.hideLoading(),console.log("失败：",t)}})},close:function(){var t=this;t.$refs.popup.close(),e.chooseImage({success:function(e){var o=e.tempFilePaths;t.img=o[0],t.$refs.popup.open("center"),console.log(e)}})},paizhao:function(){var t=this;0==t.weChatMiniProgram?e.navigateTo({url:"/pages/component/image/index"}):e.chooseImage({success:function(e){var o=e.tempFilePaths;t.img=o[0],t.$refs.popup.open("center"),console.log(e)},fail:function(e){console.log("err: ",JSON.stringify(e))}})},shouquan:function(){e.login({provider:"weixin",success:function(t){console.log(11),console.log(t),e.getUserInfo({provider:"weixin",success:function(e){console.log(22),console.log(e),t.errMsg,console.log(t.code)}})},fail:function(t){e.showToast({title:"登录授权失败",icon:"none"})}})},tiao:function(){clearInterval(this.timer),this.timer=null,e.redirectTo({url:"/pages/component/login/index"})},saoyisao:function(){e.scanCode({success:function(t){console.log("条码类型："+t.scanType),console.log("条码内容："+t.result),t.result?e.setStorage({key:"result",data:t.result,success:function(){console.log("success"),e.navigateTo({url:"/pages/component/image/index"})}}):e.showToast({title:"二维码为空!",icon:"none"})}})},tianshu:function(t,o,n){var a=this;200==n.code?(a.$store.state.userId=n.data.id,a.$store.dispatch("GetInfo"),e.switchTab({url:"/pages/newtabBar/index/index"})):a.timer=setInterval((function(){a.num--,0==a.num&&(a.num="",clearInterval(a.timer),a.tiao())}),1e3)},getSettingin:function(t,o,n){var a=this;e.getSetting({withSubscriptions:!0,success:function(e){console.log(e),e.subscriptionsSetting.mainSwitch?a.getToken(t,o,n):a.tianshu(t,o,n)},fail:function(){a.tianshu(t,o,n)}})},getToken:function(t,o,n){var a=this;e.showModal({title:"温馨提示",content:"为您及时获取心脑预警信息，需要向您发送消息",confirmText:"同意",cancelText:"拒绝",success:function(s){s.confirm?(console.log("用户点击确定"),e.requestSubscribeMessage({tmplIds:[a.$store.state.tmplIds],success:function(s){for(var i in s)"accept"==s[i]&&e.showToast({title:"已允许消息推送"});a.tianshu(t,o,n)},fail:function(e){console.log(e),console.log("消息失败"),a.tianshu(t,o,n)}})):s.cancel&&(console.log("用户点击取消"),e.showModal({title:"温馨提示",content:"拒绝后您将无法获取实时消息",confirmText:"知道了",showCancel:!1,success:function(e){a.tianshu(t,o,n)}}))}})},tuisong:function(t,o){e.request({url:this.$store.state.requestUrl+"/app/warn/saveCloseWarn",method:"get",data:{code:t.code,rawData:o.rawData,signature:o.signature,encryptedData:o.encryptedData,iv:o.iv},success:function(e){},fail:function(e){console.log("失败：",e)}})}}}}).call(this,o("543d").default)},bb70:function(e,t,o){},cf00:function(e,t,o){o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return n}));var n={uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,"2121"))}},a=function(){this.$createElement;var e=(this._self._c,o("7a6f")),t=o("f5db");this.$mp.data=Object.assign({},{$root:{m0:e,m1:t}})},s=[]}},[["0b76","common/runtime","common/vendor"]]]);