(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/component/firing/indexps"],{4980:function(e,t,o){var n=o("95ce");o.n(n).a},"54b3":function(e,t,o){(function(e,t){var n=o("4ea4");o("1ae4"),n(o("66fd"));var i=n(o("94a2"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("bc2e").default,o("543d").createPage)},7161:function(e,t,o){o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){}));var n=function(){this.$createElement;this._self._c},i=[]},"94a2":function(e,t,o){o.r(t);var n=o("7161"),i=o("f865");for(var s in i)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(s);o("4980");var a=o("f0c5"),c=Object(a.a)(i.default,n.b,n.c,!1,null,null,null,!1,n.a,void 0);t.default=c.exports},"95ce":function(e,t,o){},af2a:function(e,t,o){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={data:function(){return{radioin:!1,cl:!1,result:"",img:"https://diag.wuzhengai.com/image/firing.png",num:5,timer:null,name:"",isNewUseruserId:""}},onLoad:function(e){this.img=this.$store.state.logoimg,this.name=this.$store.state.appname},onShow:function(){var t=this;e.getStorage({key:"isNewUseruserId",success:function(e){t.isNewUseruserId=e.data,console.log("存储isNewUseruserId！",t.isNewUseruserId)}})},onHide:function(){clearInterval(this.timer),this.timer=null,this.num=5},methods:{budeng:function(){e.navigateBack({delta:1})},xieyiin:function(t){e.navigateTo({url:"/pages/component/xieyi/index?type="+t})},xieyi:function(){this.radioin=!this.radioin},tiaops:function(){this.radioin?e.redirectTo({url:"/pages/component/loginother/loginother"}):e.showToast({duration:2e3,title:"请勾选已阅读并同意《用户协议》、《隐私协议》!",icon:"none"})},xieyicl:function(){console.log(22),this.radioin?this.cl=!0:e.showToast({duration:2e3,title:"请勾选已阅读并同意《用户协议》、《隐私协议》!",icon:"none"})},tianshu:function(e,t,o){var n=this;200==o.code?n.$store.state.userId=o.data.id:n.timer=setInterval((function(){n.num--,0==n.num&&(n.num="",clearInterval(n.timer),n.tiao())}),1e3)},getSettingin:function(t,o,n){var i=this;e.getSetting({withSubscriptions:!0,success:function(e){console.log(e),e.subscriptionsSetting.mainSwitch?i.tianshu(t,o,n):i.getToken(t,o,n)},fail:function(){i.tianshu(t,o,n)}})},getToken:function(t,o,n){var i=this;e.showModal({title:"温馨提示",content:"为您及时获取心脑预警信息，需要向您发送消息",confirmText:"同意",cancelText:"拒绝",success:function(s){s.confirm?(console.log("用户点击确定"),e.requestSubscribeMessage({tmplIds:[i.$store.state.tmplIds],success:function(s){for(var a in s)"accept"==s[a]&&e.showToast({title:"已允许消息推送"});i.tianshu(t,o,n)},fail:function(e){console.log(e),console.log("消息失败"),i.tianshu(t,o,n)}})):s.cancel&&(console.log("用户点击取消"),e.showModal({title:"温馨提示",content:"拒绝后您将无法获取实时消息",confirmText:"知道了",showCancel:!1,success:function(e){i.tianshu(t,o,n)}}))}})},getPhoneNumber:function(t){var o=this;console.log(t),console.log(t.detail),o.radioin?"getPhoneNumber:ok"==t.detail.errMsg?e.login({success:function(n){console.log("uniloginres.login==res",n),console.log("e.detail.code---点击调用",t.detail.code),"login:ok"==n.errMsg&&e.request({url:o.$store.state.requestUrl+"/recuperation/userLogin/getWeChatPhoneRppg",method:"post",data:{deptId:o.$store.state.deptIdapp,code:t.detail.code,encryptedData:t.detail.encryptedData,iv:t.detail.iv},success:function(t){console.log(t,"resps"),200==t.data.code&&e.request({url:o.$store.state.requestUrl+"/recuperation/userLogin/rppgLogin",method:"post",data:{deptId:o.$store.state.deptIdapp,code:n.code,phone:t.data.data.phone,userId:o.isNewUseruserId},success:function(t){console.log(t,"reslogin"),console.log(t.data,"reslogin.data"),console.log(t.data.data,"reslogin.data.data"),o.$store.state.userId=t.data.data.id,console.log("reslogin.data.code"),e.redirectTo({url:"/pages/component/firing/index"})},fail:function(e){console.log("失败111：",e)}})},fail:function(e){console.log("失败：",e)}})}}):(console.log("用户点击了拒绝"),e.showToast({title:"用户取消授权！",icon:"success",duration:2e3})):e.showToast({title:"请先点击协议并查看确认！",icon:"success",duration:2e3})},getUserProfile:function(){},shouquan:function(){var t=this;e.login({provider:"weixin",success:function(o){console.log(11),console.log(o),e.getUserInfo({provider:"weixin",success:function(n){console.log(22),console.log(n),"login:ok"==o.errMsg&&e.request({url:t.$store.state.requestUrl+"/recuperation/userLogin/getUserWeChatId",method:"post",data:{deptId:t.$store.state.deptIdps,code:o.code,rawData:n.rawData,signature:n.signature,encryptedData:n.encryptedData,iv:n.iv},success:function(e){console.log(e.data),200==e.data.code?(t.getSettingin(o,n,e.data),t.cl=!1):t.cl=!0},fail:function(e){console.log("失败：",e)}}),console.log(o.code)}})},fail:function(t){console.log(t,"cuowu"),e.showToast({title:"用户取消授权！",icon:"success",duration:2e3})}})},tiao:function(){clearInterval(this.timer),this.timer=null,e.redirectTo({url:"/pages/component/login/index"})}}}}).call(this,o("543d").default)},f865:function(e,t,o){o.r(t);var n=o("af2a"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t.default=i.a}},[["54b3","common/runtime","common/vendor"]]]);