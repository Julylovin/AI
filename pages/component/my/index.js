(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/component/my/index"],{"00f9":function(e,t,o){o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){}));var a=function(){this.$createElement;this._self._c},n=[]},"3ec6":function(e,t,o){(function(e,t){var a=o("4ea4");o("1ae4"),a(o("66fd"));var n=a(o("d428"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("bc2e").default,o("543d").createPage)},d428:function(e,t,o){o.r(t);var a=o("00f9"),n=o("db78");for(var s in n)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(s);o("eaa8");var i=o("f0c5"),r=Object(i.a)(n.default,a.b,a.c,!1,null,null,null,!1,a.a,void 0);t.default=r.exports},d64f:function(e,t,o){},db78:function(e,t,o){o.r(t);var a=o("eeba"),n=o.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(s);t.default=n.a},eaa8:function(e,t,o){var a=o("d64f");o.n(a).a},eeba:function(e,t,o){(function(e){var a=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=a(o("9523")),i=o("9323");t.default=(n={data:function(){return{reportIdps:"",islogin:!1,isNew:!1,userName:"",roleName:"",phone:"",reportType:"",version:1,analyzeStatus:null,text:"",num:100,timer:null,result:"",indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,bannerList:[{id:1,thumbnail:"https://diag.wuzhengai.com/appimage/mypageswiper1.png"},{id:2,thumbnail:"https://diag.wuzhengai.com/appimage/mypageswiper2.png"},{id:3,thumbnail:"https://diag.wuzhengai.com/appimage/mypageswiper3.png"},{id:4,thumbnail:"https://diag.wuzhengai.com/appimage/mypageswiper4.png"}],type:2,tuijianimg:"",picImg:"https://diag.wuzhengai.com/appimage/avatormoren.png",deptName:"",userId:null,guanliinfo:[{userName:"",phone:""}],userInfo:{}}},onReady:function(){console.log("页面初次渲染完成时执行的操作")},onHide:function(){console.log("页面隐藏时执行的操作")},onUnload:function(){console.log("页面卸载时执行的操作")},onPullDownRefresh:function(){console.log("下拉刷新触发了"),e.showLoading({title:"加载中！"}),this.reportId="",this.shouquan(),e.stopPullDownRefresh()},onLoad:function(t){if(e.showLoading({title:"加载中！"}),t.q){var o=decodeURIComponent(t.q),a=new Object;if(-1!=o.indexOf("?"))for(var n=o.split("?")[1].split("&"),s=0;s<n.length;s++)a[n[s].split("=")[0]]=n[s].split("=")[1];this.reportId=a.reportId,console.log(this.reportId,"_this.reportId-报告扫码ID"),e.setStorage({key:"reportId",data:this.reportId,success:function(){console.log("_this.reportId--最新报告ID")}}),e.setStorage({key:"version",data:"",success:function(){console.log("success")}})}else this.reportId="",e.setStorage({key:"reportId",data:this.reportId,success:function(){console.log("success")}}),e.setStorage({key:"version",data:"",success:function(){console.log("success")}});this.getDeptInfo(t),this.shouquan()},onShow:function(){console.log("页面显示时执行的操作",this.$store.state.isNew),1==this.$store.state.isNew&&(this.reportId="",this.shouquan())}},(0,s.default)(n,"onUnload",(function(){this.reportId="",this.userId=""})),(0,s.default)(n,"methods",{handleBanner:function(e){console.log(e)},handleXuanran:function(e){this.userName=e.userName,this.picImg=e.faceImg?e.faceImg:e.picImg,this.phone=e.phone,this.roleName=e.roleName,console.log(this.userName,this.roleName,this.picImg,this.phone)},toligin:function(){this.$store.state.userId||e.navigateTo({url:"/pages/component/firing/indexps"})},getDeptInfo:function(t){var o=this;e.request({url:o.$store.state.requestUrl+"/app/agreement/getInfo",method:"post",data:{deptId:o.$store.state.deptIdps},success:function(e){200==e.data.code&&(o.$store.state.firingimg=JSON.parse(e.data.data.appWelcomePageBackground)[0].url,o.$store.state.loginimg=e.data.data.appLoginPageBackground,o.$store.state.yonghuxieyi=JSON.stringify(e.data.data.userAgreement),o.$store.state.yinsixieyi=JSON.stringify(e.data.data.privacyAgreement),o.$store.state.deptCode=e.data.data.deptCode,o.$store.state.tmplIds=e.data.data.wechatTemplateId,o.img=o.$store.state.firingimg)},fail:function(e){console.log("失败：",e)}})},shouquan:function(){var t=this;e.login({provider:"weixin",success:function(o){console.log(o,"weixin"),"login:ok"==o.errMsg&&e.request({url:t.$store.state.requestUrl+"/recuperation/userLogin/isNewUser",method:"post",data:{deptId:t.$store.state.deptIdapp,code:o.code,reportId:t.reportId},success:function(o){console.log(o.data,"/userLogin/isNewUser"),200==o.data.code?(o.data.data.wxId&&e.setStorage({key:"wxId",data:o.data.data.wxId,success:function(){console.log("wxId存储成功！")}}),o.data.data.userInfo&&o.data.data.userInfo.id&&e.setStorage({key:"isNewUseruserId",data:o.data.data.userInfo.id,success:function(){console.log("resps.data.data.userInfo.id存储userId成功！")}}),t.$store.state.isNew=o.data.data.isNew,0==o.data.data.isNew?(t.$store.state.userId=o.data.data.userInfo.id,t.islogin=!0,t.userId=o.data.data.userInfo.id,o.data.data.userInfo&&t.handleXuanran(o.data.data.userInfo),t.$store.dispatch("GetInfo").then((function(){})).catch((function(e){console.log("error")})),t.getReportIdmsg(o.data.data.reportId)):-1==o.data.data.isNew?(e.hideLoading(),e.showToast({title:"当前微信和手机号\n不匹配！",duration:2e3,icon:"none"}),o.data.data.userInfo&&t.handleXuanran(o.data.data.userInfo),t.userId=o.data.data.userInfo.id,t.islogin=!0,t.$store.state.userId=o.data.data.userInfo.id):-2==o.data.data.isNew?(e.hideLoading(),e.showToast({title:"该报告不属于本账号，请\n扫码本账号报告！",duration:2e3,icon:"none"}),t.reportId="",o.data.data.userInfo.id?(t.userId=o.data.data.userInfo.id,t.islogin=!0,t.$store.state.userId=o.data.data.userInfo.id,t.handleXuanran(o.data.data.userInfo)):(t.userId="",t.islogin=!1)):(e.hideLoading(),t.userId="",t.islogin=!1,t.$store.state.userId="",e.showToast({title:"暂未登陆，请登陆\n后查看报告！",duration:2e3,icon:"none"}))):(e.showToast({title:"二维码已失效\n,下拉获取最新数据！",duration:2e3,icon:"none"}),e.hideLoading())},fail:function(e){console.log("失败：",e)}}),console.log(o.code)},fail:function(t){e.showToast({title:"登录授权失败",icon:"none"}),e.hideLoading()},complete:function(){console.log("wancheng1")}})},handlelogin:function(){e.navigateTo({url:"/pages/component/firing/indexps"})},getReportIdmsg:function(t){var o=this;t&&e.request({url:o.$store.state.requestUrl+"/open/manage/getReportAnalyzeStatus",method:"get",data:{reportId:t},success:function(a){200==a.data.code&&(console.log("通过报告拿类型和具体信息",a),o.reportType=a.data.data.reportType,e.setStorage({key:"reportId",data:t,success:function(){e.setStorage({key:"version",data:o.reportType,success:function(){o.reportId?((0,i.tiaobaogaops)(o.reportId,o.reportType),e.setStorage({key:"reportId",data:o.reportId,success:function(){console.log("_this.reportId--最新报告ID")}})):o.reportIdps=t}})}})),e.hideLoading()},fail:function(t){e.hideLoading(),console.log("失败：",t)}})},tiaobaogao:function(e,t){},saoyisao:function(){e.scanCode({success:function(e){console.log("条码类型："+e.scanType),console.log("条码内容："+e.result)}})},lishibaogao:function(){this.$store.state.userId&&this.islogin?e.navigateTo({url:"/pages/component/reporthistory/index"}):e.navigateTo({url:"/pages/component/firing/indexps"})},mybaogao:function(){this.$store.state.userId&&this.islogin?e.navigateTo({url:"/pages/component/myreport/index"}):e.navigateTo({url:"/pages/component/firing/indexps"})},newbaogao:function(){if(e.showLoading({title:"加载中"}),!this.$store.state.userId||!this.islogin)return e.hideLoading(),void e.navigateTo({url:"/pages/component/firing/indexps"});e.request({url:this.$store.state.requestUrl+"/open/manage/getUserRecentlyReport",method:"get",data:{userId:this.$store.state.userId},success:function(t){if(200==t.data.code){if(console.log("通过报告拿类型和具体信息",t),""==t.data.data.reportId||!t.data.data.reportId)return void e.showToast({title:"暂无最新报告\n请先去测试吧！",duration:2e3,icon:"none"});var o=t.data.data.reportType,a=t.data.data.reportId;o&&a&&e.setStorage({key:"reportId",data:a,success:function(){e.setStorage({key:"version",data:o,success:function(){(0,i.tiaobaogaops)(a,o)}})}})}e.hideLoading()},fail:function(t){e.hideLoading(),console.log("失败：",t)}})},guanliin:function(){var t=this;e.request({url:t.$store.state.requestUrl+"/recuperation/app/getHealthManagerInfo",method:"get",data:{userId:t.userId},success:function(e){200==e.data.code?(console.log(e.data,"管理"),t.guanliinfo=e.data.data):t.guanliinfo=[{userName:e.data.msg,phone:""}]},complete:function(){},fail:function(e){console.log("失败：",e)}})},dialogConfirm:function(){console.log("点击拨打电话"),e.makePhoneCall({phoneNumber:"037166123333",success:function(){console.log("拨打电话成功")},fail:function(){console.log("打电话失败了")}})},maskClickin:function(){this.$refs.alertDialog.close()},tuichu:function(){var t=this;e.showModal({title:"提示",content:"是否确认退出?",success:function(o){o.confirm?(t.$store.dispatch("LogOut").then((function(){e.redirectTo({url:"/pages/component/firing/index"})})),console.log("用户点击确定")):o.cancel&&console.log("用户点击取消")}})},xiugai:function(){console.log("_this.$store.state",this.$store.state),this.islogin&&e.setStorage({key:"myinfo",data:{realName:this.$store.state.userName,sex:this.$store.state.sex,userHeight:this.$store.state.userHeight,birthday:this.$store.state.birthday,userWeight:this.$store.state.userWeight},success:function(t){console.log("success"),console.log(t),e.navigateTo({url:"/pages/component/register/index?type=1"})}})},renwu:function(){e.showToast({title:"正在开发中!",icon:"none"})},guanyu:function(){e.navigateTo({url:"/pages/component/about/index"})}}),n)}).call(this,o("543d").default)}},[["3ec6","common/runtime","common/vendor"]]]);